!function(){"use strict";function a(a){}angular.module("app",["ngAnimate","ngRoute","ngSanitize","mgcrea.ngStrap","uiGmapgoogle-maps","angular-md5","ngStorage"]),angular.module("app").controller("ApplicationCtrl",a),a.$inject=["$window"]}(),function(){"use strict";function a(){return function(a,b,c){a.$watch(c.inputDisabled,function(a){void 0===a?b.prop("disabled",!1):b.prop("disabled",!0)})}}angular.module("app").directive("sampleDirective",a)}(),function(){"use strict";function a(a){function b(){return"undefined"!=typeof a.user&&"undefined"!=typeof a.user.name&&null!==a.user.name}function c(){b()&&delete a.user}var d={isUserLogged:b,logOut:c};return d}angular.module("app").service("commonService",a),a.$inject=["$localStorage"]}(),function(){"use strict";function a(a,b){a.$storage=b}angular.module("app").controller("ContactCtrl",a),a.$inject=["$scope","$localStorage"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){var a=!0;if(null!==j.userName&&""!==j.userName||(a=!1),null!==j.password&&""!==j.password||(a=!1),a){var b={};b.userName=j.userName,b.password=f.createHash(j.password),d.authenticate(b).then(h,i)}}function h(c){return null===c||""===c?(j.message="Credentialele nu corespund!",void(j.cssClass="error")):(a.$storage.user=c,j.message="Salut "+a.$storage.user.name+" !",j.cssClass="",console.log(a.$storage),void(e.isUserLogged()&&b.path("/home")))}function i(a){j.message="Credentialele nu corespund!",j.cssClass="error"}var j=this;a.$storage=c,j.userName="",j.password="",j.message="",j.cssClass="",j.login=g}angular.module("app").controller("LogInCtrl",a),a.$inject=["$scope","$location","$localStorage","MainService","commonService","md5"]}(),function(){"use strict";function a(a,b,c,d){function e(){f()}function f(){d.isUserLogged()&&d.logOut(),b.path("/login")}var g=this;a.$storage=c,g.logout=f,e()}angular.module("app").controller("LogOutCtrl",a),a.$inject=["$scope","$location","$localStorage","commonService"]}(),function(){"use strict";function a(a,b){var c=this;return a.$storage=b,c.viewLocation="webapp/templates/main/main.html",c}angular.module("app").controller("MainCtrl",a),a.$inject=["$scope","$localStorage"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){e.isUserLogged()?(q.center={latitude:44.43573,longitude:26.048109},q.zoom=15,q.active={},q.mapOptions={addCoordinates:l},q.marker={key:1,events:{click:function(a,b,c){q.active=p(c.coords),c.doShow=!0},rightclick:function(b,c,d){o(d.coords.latitude,d.coords.longitude),a.$apply()}}},i()):b.path("/login")}function h(a){d.deleteCoordinates(a).then(function(){i()},function(a){})}function i(){d.getAllCoordinates().then(j,k)}function j(b){if(q.cssClass="",q.markers=[],q.markersAttributes=[],b.length>0)for(var c={},d={},e=0;e<b.length;e++)c={},d={},b[e].options={icon:a.config.theIcons[b[e].icon&&b[e].icon||"event"].path},b[e].canDelete=a.$storage.user.userName==b[e].owner||"admin"==a.$storage.user.status.type,q.markers.push(b[e]),d.marker=b[e],d.canDelete=!1,q.markersAttributes.push(d);q.markersBackup=JSON.parse(JSON.stringify(q.markers)),q.applyFilters()}function k(a){}function l(b){b.owner=a.$storage.user.userName,d.addCoordinates(b).then(m,n)}function m(b){q.message="Datele au fost salvate cu succes in baza de date!",q.cssClass="dataAdded",a.$apply(),i()}function n(){q.message="A aparut o eroare la salvarea datelor in baza de date!",q.cssClass="error"}function o(a,b){for(var c=-1,d=0;d<q.markers.length;d++)q.markers[d].latitude===a&&q.markers[d].longitude===b&&(c=d);-1!=c&&q.markersAttributes[c].canDelete&&(q.markers.splice(c,1),q.markersAttributes.splice(c,1))}function p(a){for(var b=a.latitude,c=a.longitude,d=0;d<q.markersAttributes.length;d++)if(q.markersAttributes[d].marker.latitude===b&&q.markersAttributes[d].marker.longitude===c)return q.markersAttributes[d];return null}var q=this;a.config={},a.config.theIcons={accountancy:{label:"Accountancy",path:"images/map-icons/accountancy.png"},"arts-crafts":{label:"Arts-crafts",path:"images/map-icons/arts-crafts.png"},astrology:{label:"Astrology",path:"images/map-icons/astrology.png"},automotive:{label:"Automotive",path:"images/map-icons/automotive.png"},bars:{label:"Bars",path:"images/map-icons/bars.png"},birds:{label:"Birds",path:"images/map-icons/birds.png"},"books-media":{label:"Books-media",path:"images/map-icons/books-media.png"},"breakfast-n-brunch":{label:"Breakfast-n-brunch",path:"images/map-icons/breakfast-n-brunch.png"},business:{label:"Business",path:"images/map-icons/business.png"},"cake-shop":{label:"Cake-shop",path:"images/map-icons/cake-shop.png"},clothings:{label:"Clothings",path:"images/map-icons/clothings.png"},"clubs.png":{label:"Clubs.png",path:"images/map-icons/clubs.png"},"coffee-n-tea":{label:"Coffee-n-tea",path:"images/map-icons/coffee-n-tea.png"},"commercial-places":{label:"Commercial-places",path:"images/map-icons/commercial-places.png"},community:{label:"Community",path:"images/map-icons/community.png"},computers:{label:"Computers",path:"images/map-icons/computers.png"},concerts:{label:"Concerts",path:"images/map-icons/concerts.png"},cookbooks:{label:"Cookbooks",path:"images/map-icons/cookbooks.png"},"dance-clubs":{label:"Dance-clubs",path:"images/map-icons/dance-clubs.png"},"default":{label:"Default",path:"images/map-icons/default.png"},dental:{label:"Dental",path:"images/map-icons/dental.png"},doctors:{label:"Doctors",path:"images/map-icons/doctors.png"},education:{label:"Education",path:"images/map-icons/education.png"},electronics:{label:"Electronics",path:"images/map-icons/electronics.png"},employment:{label:"Employment",path:"images/map-icons/employment.png"},engineering:{label:"Engineering",path:"images/map-icons/engineering.png"},entertainment:{label:"Entertainment",path:"images/map-icons/entertainment.png"},event:{label:"Event",path:"images/map-icons/event.png"},exhibitions:{label:"Exhibitions",path:"images/map-icons/exhibitions.png"},fashion:{label:"Fashion",path:"images/map-icons/fashion.png"}},a.config.filters={mine:!1,name:""},a.$storage=c,q.center={latitude:44.43573,longitude:26.048109},q.zoom=15,q.marker={},q.activeMarker={},q.events={click:function(b,c,d){var e=d[0];q.markers.push({latitude:e.latLng.lat(),longitude:e.latLng.lng()});var f={};f.marker={latitude:e.latLng.lat(),longitude:e.latLng.lng(),id:-1},f.canDelete=!0,q.markersAttributes.push(f),a.$apply()}},q.markers=[],q.markersAttributes=[],q.markerDetails={},q.message="",q.cssClass="ok",q.activeFilter={owner:a.config.filters.mine?a.$storage.user.userName:""},q.addCoordinates=l,q.applyFilters=function(){q.activeFilter.owner=a.config.filters.mine?a.$storage.user.userName:"",q.markers=f("filter")(q.markersBackup,q.activeFilter)},a.$watch("config.filters.name",function(a,b){console.log(a)}),q.toggleFilter=function(a){q.activeFilter.icon==a?q.activeFilter.icon="":q.activeFilter.icon=a,q.applyFilters()},g(),a.$root.deleteCoordinates=h,a.$root.addCoordinates=l}angular.module("app").controller("MapCtrl",a),a.$inject=["$scope","$location","$localStorage","MainService","commonService","$filter"]}(),function(){"use strict";function a(a,b){a.$storage=b}angular.module("app").controller("MenuController",a),a.$inject=["$scope","$localStorage"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){h()}function h(){m.form.email="",m.form.name="",m.form.userName="",m.form.password="",m.form.age="",m.form.sex=""}function i(){var a=!0;null!==m.form.email&&""!==m.form.email||(a=!1),null!==m.form.name&&""!==m.form.name||(a=!1),null!==m.form.userName&&""!==m.form.userName||(a=!1),null!==m.form.password&&""!==m.form.password||(a=!1),null!==m.form.age&&""!==m.form.age||(a=!1),null!==m.form.sex&&""!==m.form.sex||(a=!1),a&&(m.form.password=d.createHash(m.form.password),c.addUser(m.form).then(j,k))}function j(a){return null===a||""===a?(m.message="User sau email deja utilizate!",void(m.cssClass="error")):(m.message="Utilizatorul a fost adaugat cu succes!",m.cssClass="ok",h(),void f(l,4e3))}function k(){m.message="A aparut o eroare la salvarea utilizatorului!",m.cssClass="error"}function l(){e.path("/login")}var m=this;a.$storage=b,m.form={},m.form.email="",m.form.name="",m.form.userName="",m.form.password="",m.form.age="",m.form.sex="",m.message="",m.cssClass="",m.register=i,g()}angular.module("app").controller("RegisterCtrl",a),a.$inject=["$scope","$localStorage","MainService","md5","$location","$timeout"]}(),function(){"use strict";function a(a,b,c){function d(a){return j("/coordinates/insert",a)}function e(a){return i("/coordinates/delete",a)}function f(){return j("/coordinates/all")}function g(a){return j("/user/authenticate",a)}function h(a){return j("/user/insert",a)}function i(c,d){var e=b.defer(),f=d;return delete f.canDelete,delete f.options,a({method:"DELETE",url:"http://localhost:8000/mApp"+c,data:f,headers:{"Content-Type":"application/json"}}).then(function(a){e.resolve(d),console.log("Success Service!")},function(a){e.reject(d),console.log("Service"+a.status)}),e.promise}function j(c,d){var e=b.defer();return a.post("http://localhost:8000/mApp"+c,d).success(function(a,b,c,d){e.resolve(a)}).error(function(a,b,c,d){e.reject(a)}),e.promise}var k={addCoordinates:d,deleteCoordinates:e,getAllCoordinates:f,authenticate:g,addUser:h};return k}angular.module("app").service("MainService",a),a.$inject=["$http","$q","$location"]}(),function(){"use strict";function a(a){a.when("/login",{templateUrl:"pages/map/login.html",controller:"LogInCtrl",controllerAs:"login"}).when("/logout",{templateUrl:"pages/map/logout.html",controller:"LogOutCtrl",controllerAs:"logout"}).when("/home",{templateUrl:"pages/main/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/map",{templateUrl:"pages/map/map.html",controller:"MapCtrl",controllerAs:"map"}).when("/register",{templateUrl:"pages/map/register.html",controller:"RegisterCtrl",controllerAs:"reg"}).when("/contact",{templateUrl:"pages/map/contact.html",controller:"ContactCtrl",controllerAs:"contact"}).otherwise({redirectTo:"/login"})}angular.module("app").config(a),a.$inject=["$routeProvider"]}();